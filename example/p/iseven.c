/*
 even_msg: "The number is even", 10
 is_odd: "The number is odd", 10
 msg: "Enter a number: "

 main:
   mov_imm Mc, 16 ;; the legth of the message
   sout msg ;; prompt for a number first
   uinq Ma ;; read an unsigned number and store it in Ma register
   mod_imm Ma, 2 ;; get remainder by 2
   cmp_imm Ma, 0 ;; is the remainder 0?
   je even ;; print even there
   jmp_addr odd ;; else it is odd

even:
  mov_imm Mc, 19 ;; length of the message
  sout even_msg
  jmp_addr exit

odd:
  mov_imm Mc, 18 ;; length of the message
  sout is_odd
  jmp_addr exit

exit:
  mov_imm Ma, 0 ;; exit code
  halt
*/
#include <stdio.h>

#define c(a) (unsigned char)(a)

int main()
{
    FILE *f = fopen("../iseven.mbin", "wb");
    unsigned char program[] = {
        0x4d, 0x49, 0x4e, 0x00, 0x00, 0x00, 0x00, 0x00, // The first header bytes
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, // The instruction len
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // The data len
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, // The string len

        0x12, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x1A, //  mov_imm Mc, 15
        0x25, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x72, // sout msg
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x81,
        0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0A,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3A,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x51,
        0x0B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x27,
        0x13, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x1A,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x72, //
        0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x27,
        0x12, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x1A,
        0x13, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x72, //
        0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x27,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1A,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,

        c('T'), c('h'), c('e'), c(' '), c('n'), c('u'), c('m'), c('b'), 
        c('e'), c('r'), c(' '), c('i'), c('s') ,c(' '), c('e'), c('v'), 
        c('e'), c('n'), c('\n'),c('T'), c('h'), c('e'), c(' '), c('n'),
        c('u'), c('m'), c('b'), c('e'), c('r'), c(' '), c('i'), c('s'),
        c(' '), c('o'), c('d'), c('d'), c('\n'),c('E'), c('n'), c('t'), 
        c('e'), c('r'), c(' '), c('t'), c('h'), c('e'), c(' '), c('n'), 
        c('u'), c('m'), c('b'), c('e'), c('r'), c(':'), c(' '), c(' '), 
    };
    fwrite(program, 1, sizeof(program), f);
    fclose(f);
}